(this.webpackJsonpvideo=this.webpackJsonpvideo||[]).push([[0],{1246:function(e,t,a){},1253:function(e,t,a){},1254:function(e,t,a){},1255:function(e,t,a){},1257:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(21),l=a.n(r),o=a(31),i=a(71),s=a.n(i),u=a(111),m=a(5),d=a(19),_=a(139),v=a.n(_),b=a(140),p=a.n(b);function f(e,t){if(e){var a="30%";30*e.offsetWidth/100<300&&(a="300px");var n=String(100/t)+"%",c="";0===t||1===t?(c="100%",n="100%"):2===t?(c="45%",n="100%"):3===t||4===t?(c="35%",n="50%"):c=String(100/t)+"%";for(var r=e.querySelectorAll("video"),l=0;l<r.length;++l)r[l].style.minWidth=a,r[l].style.minHeight="40%",r[l].style.setProperty("width",c),r[l].style.setProperty("height",n);return{minWidth:a,minHeight:"40%",width:c,height:n}}}var g=a(1298),h=a(1299),E=a(1291),y=a(1288),j=a(1300),O=a(1301),w=a(149),S=a.n(w),N=a(150),C=a.n(N),k=a(152),x=a.n(k),D=a(153),T=a.n(D),H=a(154),L=a.n(H),M=a(155),R=a.n(M),A=a(151),B=a.n(A),P=a(156),F=a.n(P),I=a(1294),J=a(1295),U=a(1292),W=(a(1244),a(1245),a(1246),{iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),q=null,G=null,V=0,z=function(){var e=Object(d.f)(),t=Object(n.useRef)(null),a=window.location,r=a.pathname,l=a.origin,i=Object(n.useState)(!1),_=Object(m.a)(i,2),b=(_[0],_[1]),w=Object(n.useState)(!1),N=Object(m.a)(w,2),k=(N[0],N[1]),D=Object(n.useState)(p.a.internet.userName()),H=Object(m.a)(D,2),M=H[0],A=H[1],P=Object(n.useState)(!0),z=Object(m.a)(P,2),K=z[0],Q=z[1],X=Object(n.useState)(!0),Y=Object(m.a)(X,2),Z=Y[0],$=Y[1],ee=Object(n.useState)(!0),te=Object(m.a)(ee,2),ae=te[0],ne=te[1],ce=Object(n.useState)(!1),re=Object(m.a)(ce,2),le=re[0],oe=re[1],ie=Object(n.useState)(!1),se=Object(m.a)(ie,2),ue=se[0],me=se[1],de=Object(n.useState)(!1),_e=Object(m.a)(de,2),ve=_e[0],be=_e[1],pe=Object(n.useState)([]),fe=Object(m.a)(pe,2),ge=fe[0],he=fe[1],Ee=Object(n.useState)(""),ye=Object(m.a)(Ee,2),je=ye[0],Oe=ye[1],we=Object(n.useState)(0),Se=Object(m.a)(we,2),Ne=Se[0],Ce=Se[1],ke={},xe=function(){ue||Ce(0),me(!ue)},De=function(){var e=Object(u.a)(s.a.mark((function e(t,a){var n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=JSON.parse(a),t===G){e.next=13;break}if(!n.sdp){e.next=12;break}return e.next=5,ke[t].setRemoteDescription(new RTCSessionDescription(n.sdp));case 5:if("offer"!==n.sdp.type){e.next=12;break}return e.next=8,ke[t].createAnswer();case 8:return c=e.sent,e.next=11,ke[t].setLocalDescription(c);case 11:q.emit("signal",t,JSON.stringify({sdp:ke[t].localDescription}));case 12:n.ice&&ke[t].addIceCandidate(new RTCIceCandidate(n.ice)).catch((function(e){return console.log(e)}));case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Te=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({video:!0});case 3:return e.sent.active?b(!0):b(!1),e.next=7,navigator.mediaDevices.getUserMedia({audio:!0});case 7:e.sent.active?k(!0):k(!1),navigator.mediaDevices.getDisplayMedia?be(!0):be(!1),(Z||ae)&&navigator.mediaDevices.getUserMedia({video:Z,audio:ae}).then((function(e){window.localStream=e,t.current.srcObject=window.localStream})).then((function(e){})).catch((function(e){return console.log(e)})),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),He=function(e,t,a){he((function(a){return[].concat(Object(o.a)(a),[{sender:t,data:e}])})),a!==G&&Ce(ue?0:Ne+1)};return Object(n.useEffect)((function(){Te()}),[K,Z,ae]),Object(n.useEffect)((function(){if(!K){(q=v.a.connect("https://incog-317412.el.r.appspot.com/",{secure:!0,path:"/api/v1/conference/join"})).on("signal",De),q.on("connect",(function(){q.emit("join-call",l+r),G=q.id})),q.on("chat-message",He),q.on("user-left",(function(e){var t=document.querySelector('[data-socket="'.concat(e,'"]'));null!==t&&(V--,t.parentNode.removeChild(t),f(document.getElementById("main"),V))}));var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,a=void 0===t?640:t,n=e.height,c=void 0===n?480:n,r=Object.assign(document.createElement("canvas"),{width:a,height:c});r.getContext("2d").fillRect(0,0,a,c);var l=r.captureStream();return Object.assign(l.getVideoTracks()[0],{enabled:!1})},t=function(){var e=new AudioContext,t=e.createOscillator(),a=t.connect(e.createMediaStreamDestination());return e.resume(),t.start(),e.resume(),Object.assign(a.stream.getAudioTracks()[0],{enabled:!1})};q.on("user-joined",(function(a,n){if(n.forEach((function(a){if(ke[a]=new RTCPeerConnection(W),ke[a].onicecandidate=function(e){null!=e.candidate&&q.emit("signal",a,JSON.stringify({ice:e.candidate}))},ke[a].onaddstream=function(e){var t=document.querySelector('[data-socket="'.concat(a,'"]'));if(null!==t)t.srcObject=e.stream;else{V=n.length;var c=document.getElementById("main"),r=f(c,V);if(r){var l=document.createElement("video"),o={minWidth:r.minWidth,minHeight:r.minHeight,maxHeight:"100%",margin:"10px",borderStyle:"solid",borderColor:"#bdbdbd",objectFit:"fill"};for(var i in o)l.style[i]=o[i];l.style.setProperty("width",r.width),l.style.setProperty("height",r.height),l.setAttribute("data-socket",a),l.srcObject=e.stream,l.autoplay=!0,l.playsinline=!0,c.appendChild(l)}}},void 0!==window.localStream&&null!==window.localStream)ke[a].addStream(window.localStream);else{window.localStream=function(){return new MediaStream([e.apply(void 0,arguments),t()])}(),ke[a].addStream(window.localStream)}})),a===G){var c=function(e){if(e===G)return"continue";try{ke[e].addStream(window.localStream)}catch(t){}ke[e].createOffer().then((function(t){ke[e].setLocalDescription(t).then((function(){q.emit("signal",e,JSON.stringify({sdp:ke[e].localDescription}))})).catch((function(e){return console.log(e)}))}))};for(var r in ke)c(r)}}))}}),[K]),function(){var e=(navigator&&(navigator.userAgent||"")).toLowerCase(),t=(navigator&&(navigator.vendor||"")).toLowerCase();return null!==(/google inc/.test(t)?e.match(/(?:chrome|crios)\/(\d+)/):null)}()?c.a.createElement(c.a.Fragment,null,K&&c.a.createElement(y.a,null,c.a.createElement(j.b,null,c.a.createElement("div",{className:"username-selector__container"},c.a.createElement("p",{className:"username-selector__label"},"Set your username"),c.a.createElement("div",{className:"username-selector__input_container"},c.a.createElement(g.a,{placeholder:"Username",value:M,onChange:function(e){return A(e.target.value)}}),c.a.createElement(O.a,{variant:"contained",color:"primary",onClick:function(){return Q(!1)},className:"username-selector__button"},"Connect"))),c.a.createElement(y.a,null,c.a.createElement("div",{className:"username-selector__preview_video_wrapper"},c.a.createElement("video",{className:"username-selector__preview_video",id:"my-video1",ref:t,autoPlay:!0,muted:!0}))))),!K&&c.a.createElement("div",null,c.a.createElement("div",{className:"video_call_screen__call_buttons"},c.a.createElement(h.a,{className:"video_call_screen__call_buttons--webcam-icon",onClick:function(){return $(!Z)}},Z?c.a.createElement(S.a,null):c.a.createElement(C.a,null)),c.a.createElement(h.a,{className:"video_call_screen__call_buttons--endcall-icon",onClick:function(){q&&(q=null);try{t.current.srcObject.getTracks().forEach((function(e){return e.stop()}))}catch(a){console.log(a)}setTimeout((function(){e.push("/")}),100)}},c.a.createElement(B.a,null)),c.a.createElement(h.a,{className:"video_call_screen__call_buttons--mic-icon",onClick:function(){return ne(!ae)}},ae?c.a.createElement(x.a,null):c.a.createElement(T.a,null)),ve&&c.a.createElement(h.a,{className:"video_call_screen__call_buttons--screenshare-icon",onClick:function(){return oe(!le)}},le?c.a.createElement(L.a,null):c.a.createElement(R.a,null)),c.a.createElement(E.a,{badgeContent:Ne,max:999,color:"secondary",onClick:xe},c.a.createElement(h.a,{className:"video_call_screen__call_buttons--chat-icon",onClick:xe},c.a.createElement(F.a,null)))),c.a.createElement(J.a,{show:ue,onHide:xe,className:"video_call_screen__chat_modal"},c.a.createElement(J.a.Header,{closeButton:!0},c.a.createElement(J.a.Title,null,"Chat Room")),c.a.createElement(J.a.Body,{className:"video_call_screen__chat_modal__body"},ge&&ge.length?ge.map((function(e,t){return c.a.createElement("div",{key:"chat-messages-".concat(t),style:{textAlign:"left"}},c.a.createElement("p",{style:{wordBreak:"break-all"}},c.a.createElement("b",null,e.sender),": ",e.data))})):c.a.createElement("p",null,"No message yet")),c.a.createElement(J.a.Footer,{className:"video_call_screen__chat_modal__footer"},c.a.createElement(g.a,{placeholder:"Message",value:je,onChange:function(e){return Oe(e.target.value)}}),c.a.createElement(O.a,{variant:"contained",color:"primary",onClick:function(){q&&q.emit("chat-message",je,M),Oe("")},className:"video_call_screen__chat_modal__send_button"},"Send"))),c.a.createElement("div",{className:"video_call_screen__invitation_link__container"},c.a.createElement("div",{style:{paddingTop:"20px"}},c.a.createElement(g.a,{value:l+r,disable:"true"}),c.a.createElement(O.a,{className:"video_call_screen__invitation_link__invite_button",variant:"contained",onClick:function(){var e=l+r;if(navigator.clipboard)navigator.clipboard.writeText(e).then((function(){I.b.success("Link copied to clipboard!")}),(function(){I.b.error("Failed to copy")}));else{var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy"),I.b.success("Link copied to clipboard!")}catch(a){I.b.error("Failed to copy")}document.body.removeChild(t)}}},"Copy invite link")),c.a.createElement(U.a,{id:"main",className:"video_call_screen__video_stream_container"},c.a.createElement("video",{id:"my-video2",className:"video_call_screen__video_stream",ref:t,autoPlay:!0,muted:!0}))))):null},K=a(1293),Q=a(1297);a(1253),a(1254);var X=function(){return c.a.createElement("div",{className:"navbar__container"},c.a.createElement(j.a,null,c.a.createElement("div",{className:" navbar__nav-item  navbar__heading"},"Incogly"),c.a.createElement(K.a,null),c.a.createElement(y.a,null,c.a.createElement("div",{className:"navbar__nav-item"},"Discover"),c.a.createElement("div",{className:"navbar__nav-item"},"Blog"),c.a.createElement("div",{className:"navbar__nav-item"},"GitHub"),c.a.createElement("div",{className:"navbar__nav-item"},"Discord")),c.a.createElement(K.a,null),c.a.createElement(j.a,null,c.a.createElement(O.a,{variant:"contained",className:"navbar__nav-item navbar__button navbar__button--dark"},"Login"),c.a.createElement(K.a,null),c.a.createElement(O.a,{variant:"contained",className:"navbar__nav-item navbar__button navbar__button--pink"},"Sign Up"))))},Y=function(){var e=Object(d.f)(),t=Object(n.useState)(""),a=Object(m.a)(t,2),r=a[0],l=a[1];return c.a.createElement("div",{className:"home_page__container"},c.a.createElement(X,null),c.a.createElement(j.b,null,c.a.createElement("h1",{className:"home_page__heading"},"Connect & Collaborate,"),c.a.createElement("h1",{className:"home_page__heading"},"without friction."),c.a.createElement("p",{className:"home_page__sub-heading"},"Go anonymous, Go incogly."),c.a.createElement("img",{src:"/images/code-image.png",alt:"Code"}),c.a.createElement(K.a,null),c.a.createElement("div",{className:"home_page__url_container"},c.a.createElement(j.b,null,c.a.createElement("p",{className:"home_page__text"},"Start or join a meeting"),c.a.createElement(Q.a,{className:"home_page__input_box",placeholder:"URL",value:r,onChange:function(e){return l(e.target.value)}}),c.a.createElement(K.a,null),c.a.createElement(O.a,{className:"home_page__join_button",variant:"contained",onClick:function(){var t;t=r?r.trim():Math.random().toString(36).substring(2,7),e.push("/".concat(t))}},"Start Collaborating")))))},Z=a(82),$=a(1296),ee=function(e){return n.createElement(n.Fragment,null,n.createElement($.a,null,n.createElement(Z.a,null,n.createElement(d.c,null,n.createElement(d.a,{path:"/",exact:!0,component:Y}),n.createElement(d.a,{path:"/:url",component:z})))))};a(1255);l.a.render(c.a.createElement(ee,null),document.getElementById("root"))},168:function(e,t,a){e.exports=a(1257)},195:function(e,t){}},[[168,1,2]]]);
//# sourceMappingURL=main.01284f4b.chunk.js.map